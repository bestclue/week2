<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classic Puzzle Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
  }
  
  h1 {
    color: #333;
    margin-bottom: 20px;
  }
  
  #puzzle-container {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 2px;
    margin-bottom: 20px;
    height: 300px; /* ë†’ì´ë¥¼ 300pxë¡œ ê³ ì • */
  }
  
  .puzzle-piece {
    width: 100px;
    height: 100px;
    background-color: #ccc;
    border: 1px solid #333;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .puzzle-piece:hover {
    background-color: #ddd;
  }
  
  .empty {
    visibility: hidden;
  }

  #result-container {
    margin-bottom: 20px;
    height: 100px; /* ë†’ì´ë¥¼ 300pxë¡œ ê³ ì • */
    flex-direction: column; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
    align-items: center; /* ìˆ˜ì§ ì •ë ¬ */
    flex-direction: row; /* ê°€ë¡œë¡œ ì •ë ¬ */
    display: flex;
  }

  #result {
    font-size: 20px;
    color: #4CAF50;
    font-weight: bold;
    animation: congratulations 2s ease-in-out infinite alternate;
  }

  @keyframes congratulations {
    0% {
        color: #4CAF50; /* ì´ˆë¡ìƒ‰ */
    }
    25% {
        color: #FFD700; /* í™©ê¸ˆìƒ‰ */
    }
    50% {
        color: #FF6347; /* ì ìƒ‰ */
    }
    75% {
        color: #4169E1; /* íŒŒë€ìƒ‰ */
    }
    100% {
        color: #4CAF50; /* ì´ˆë¡ìƒ‰ */
    }
}


  #restart {
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>Classic Puzzle Game</h1>
<div id="puzzle-container"></div>
<div id="result-container">
  <div id="result"></div>
  <div id="restart" style="display: none;"><span style="font-size: 24px;">ğŸ”„ï¸</span></div>
</div>

<script>
  // í¼ì¦ ì¡°ê° ë°°ì—´ ìƒì„±
  const pieces = [];
  for (let i = 1; i <= 9; i++) {
    const piece = document.createElement('div');
    piece.className = 'puzzle-piece';
    piece.textContent = i;
    piece.addEventListener('click', () => movePiece(piece));
    pieces.push(piece);
  }
  // ë§ˆì§€ë§‰ ì¡°ê°ì€ ë¹ˆ ì¹¸ìœ¼ë¡œ ì„¤ì •
  pieces[8].textContent = '';
  pieces[8].classList.add('empty');

  // ëœë¤í•˜ê²Œ í¼ì¦ ì¡°ê° ì„ê¸°
  shufflePieces();

  // í¼ì¦ ì¡°ê° ë°°ì¹˜
  const puzzleContainer = document.getElementById('puzzle-container');
  pieces.forEach(piece => puzzleContainer.appendChild(piece));

  // ì´ë™ íšŸìˆ˜ ë³€ìˆ˜
  let moveCount = 0;

  // í¼ì¦ ì¡°ê° ì´ë™ í•¨ìˆ˜
  function movePiece(clickedPiece) {
    // ë¹ˆ ì¹¸ ì°¾ê¸°
    const emptyPieceIndex = pieces.findIndex(piece => piece.textContent === '');
    const clickedPieceIndex = pieces.indexOf(clickedPiece);

    // ë¹ˆ ì¹¸ê³¼ í´ë¦­í•œ ì¡°ê°ì´ ì¸ì ‘í•˜ë©´ ì´ë™
    if (isAdjacent(emptyPieceIndex, clickedPieceIndex)) {
      // ë¹ˆ ì¹¸ê³¼ í´ë¦­í•œ ì¡°ê°ì˜ í…ìŠ¤íŠ¸ êµí™˜
      [pieces[emptyPieceIndex].textContent, pieces[clickedPieceIndex].textContent] = [pieces[clickedPieceIndex].textContent, pieces[emptyPieceIndex].textContent];
      // ë¹ˆ ì¹¸ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
      pieces[emptyPieceIndex].classList.remove('empty');
      clickedPiece.classList.add('empty');
      // ì´ë™ íšŸìˆ˜ ì¦ê°€
      moveCount++;
      // ì´ë™ íšŸìˆ˜ê°€ 10íšŒë¥¼ ì´ˆê³¼í•˜ë©´ ìƒˆë¡œê³ ì¹¨ ì•„ì´ì½˜ í‘œì‹œ
      if (moveCount > 100) {
        document.getElementById('restart').style.display = "block";
      }
      // í¼ì¦ì´ ì™„ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
      if (isPuzzleComplete()) {
        document.getElementById('result').textContent = `ğŸ‰ì¶•í•˜í•©ë‹ˆë‹¤! í¼ì¦ì„ ${moveCount}ë²ˆ ë§Œì— ë§ì¶”ì…¨ìŠµë‹ˆë‹¤!ğŸ‰`;
        document.getElementById('restart').style.display = "block";
      }
    }
  }

  // ë‘ í¼ì¦ ì¡°ê°ì´ ì¸ì ‘í•œì§€ í™•ì¸
  function isAdjacent(index1, index2) {
    const rowDiff = Math.abs(Math.floor(index1 / 3) - Math.floor(index2 / 3));
    const colDiff = Math.abs((index1 % 3) - (index2 % 3));
    return (rowDiff === 1 && colDiff === 0) || (colDiff === 1 && rowDiff === 0);
  }

  // ë°°ì—´ ì„ëŠ” í•¨ìˆ˜
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // ëœë¤í•˜ê²Œ í¼ì¦ ì¡°ê° ì„ëŠ” í•¨ìˆ˜ (í•´ê²° ê°€ëŠ¥í•œ í¼ì¦ì¸ì§€ í™•ì¸)
  function shufflePieces() {
    do {
      shuffle(pieces);
    } while (!isSolvable(pieces));
  }

  // í•´ê²° ê°€ëŠ¥í•œ í¼ì¦ì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
  function isSolvable(pieces) {
    let inversions = 0;
    for (let i = 0; i < 8; i++) {
      for (let j = i + 1; j < 9; j++) {
        if (parseInt(pieces[i].textContent) > parseInt(pieces[j].textContent)) {
          inversions++;
        }
      }
    }
    return inversions % 2 === 0;
  }

  // í¼ì¦ì´ ì™„ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
  function isPuzzleComplete() {
    for (let i = 0; i < 8; i++) {
      if (parseInt(pieces[i].textContent) !== i + 1) {
        return false;
      }
    }
    return true;
  }

  // ìƒˆë¡œê³ ì¹¨ í•¨ìˆ˜
  function refreshPage() {
    window.location.reload();
  }

  // ìƒˆë¡œê³ ì¹¨ ì•„ì´ì½˜ í´ë¦­ ì´ë²¤íŠ¸
  const refreshIcon = document.getElementById('restart');
  refreshIcon.addEventListener('click', refreshPage);
</script>
</body>
</html>
